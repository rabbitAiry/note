# Java基础

> Thinking in Java 笔记

[TOC]

### #1 对象

##### 用引用操纵对象

- 引用和对象相当于遥控器和电视机，使用引用来操控对象

  - 只需遥控器，就可以改变电视机音量大小
  - 遥控器可以单独存在

  ```java
  String s;
  String s = "abcd";
  ```

- new表示创建对象

##### 存储数据的地方

- 寄存器：数量极其有限
- 堆栈：位于RAM中
- 堆：一种通用的内存池，位于RAM中，用于存放所有的JAVA对象
- 静态存储：在固定位置的RAM中，存放程序运行时一直存在的数据
- 常量存储：存放在代码内部。嵌入式系统下可以选择存放ROM中
- 非RAM存储：数据存活于程序之外

##### 数据类型

- 基本类型
  - boolean、char、byte、short、int、long、float、double、void
  - 这些变量不大，但存储在堆中不如存储在堆栈中高效，所以java提供了不用new来创建变量的方法创建了并非是“引用”的自动”变量“
  - 基本类型具有包装器类，如int类型和Integer类。使用包装器类使得可以在堆中创建一个非基本对象来表示基本类型
- 高精度数字
  - BigInteger和BigDecimal
  - 必须以方法调用的方式取代运算符方式来实现，这是以速度换取了精度（运算慢）
- 数组初始化

##### 对象内部

- 作用域scope
  - 作用域决定了在其内定义的变量名的可见性和生命周期
  - 对象作用域
    - java对象不具备和基本类型一样的生命周期。当其引用作用域结束时，其指向对象仍继续占据内存空间
    - java有一个“垃圾回收器”，用于监视new创建的所有对象，并辨别那些不会再被引用的对象，随后会释放这些内存空间，以便供其他对象的使用
  
- 成员变量和方法（域和方法 field and method）
  - 如果成员变量是一个对象的引用，则有必要使用构造器
  
- 基本成员默认值

  - 若类的某个成员是基本类型，即时没有进行初始化，java也会确保其获得一个默认值（仅 成员变量 拥有默认值）

    | 基本类型 | 默认值   |
    | -------- | -------- |
    | boolean  | false    |
    | char     | null     |
    | byte     | (byte)0  |
    | short    | (short)0 |
    | int      | 0        |
    | long     | 0L       |
    | float    | 0.0f     |
    | double   | 0.0d     |

##### 第一个java程序

- 名字可视化

  ```
  如 com.example.TODO, java.util.ArrayList
  ```

- static关键字

  - 声明一个事物为static时，意味着这个数据或方法可以不创建对象直接访问或使用
  - 即时创建同一类的两个对象，其中static成员变量的存储空间一样（只有一份存储空间）
  - static方法中不能直接访问非static成员或方法

- 注释文档Javadoc

  - Javadoc是用于提取注释（`/** ... */`）的工具，输出一份HTML文件
  - Javadoc只为public和protected成员进行文档注释
  - 能够在注释中嵌入html
  - 可以添加一些标签，如`@see`链接到其他文档、`@version`版本信息、`@param`参数

[TOC]

### #2 控制程序流

##### 操作符

- 几乎所有操作符都只能操作基本类型，但`=`、`==`、`!=`能够操作所有对象，表示所引用的对象是否相同。此外，String类还支持`+`、`+=`

- 正则表达式  初识

  - 使用`?`表示可能有也可能没有的东西
  - 使用`+`表示有一个或多个要表达的东西

  ```java
  -?\\d+
  // \d表示一个数位,前面加上\表示转义
  // 表示前面可能有或没有负号，后面有一个或多个数位
  ```

- 位的运算：与或非、移位

- 类型转换：扩展转换会自动完成，窄化转换则需要强制

  ```java
  float f1 = 0.13;
  // 上述表达会报错，应该改为下述表达
  
  float f1 = 0.13F;
  float f2 = (float)0.13;
  ```

- 数值表达

  ```java
  1.39e-47f
  // 这表示 1.39 * 10^(-47)
  ```

##### 流程控制

- goto语句：continue和break后面加上标签，类似汇编语言的跳转

  ```java
  label1: 
  outer-iteration {
    inner-iteration {
      //... 
      break; // 1
      //... 
      continue; // 2 
      //...
      continue label1; 
      // 3 中断所有循环，回到label1，准备重新开始循环
      //...
      break label1; 
      // 4 中断所有循环，回到label1，不重新进入循环
    }
  }
  ```

[TOC]

### #3 初始化和清除

##### 构造器

- 在Java中，**初始化**和创建无法分离

  - java会自动初始化，且在使用构造器之前（大部分初始值都为0）

  - 初始化的内容包括对象的初始化，调用他们的构造器

  - 类的静态变量会*优先* 初始化

  - 初始化子句、静态子句：多个静态初始化动作的集合，只会在初始化时执行一次

    - 静态子句前会有static

    ```java
    class Cups { 
      static Cup c1; 
      static Cup c2; 
      
      // 静态子句
      static { 
        c1 = new Cup(1); 
        c2 = new Cup(2);
    	}
    	Cups() { 
        System.out.println("Cups()");
    	}
    }
    ```

- 仅类中没有构造器时，编译器会自动创建一个无参构造器

- this表示该对象的引用，只能在方法内部使用

  - 所以静态方法不能用this

- 构造器中使用构造器：

  - 方法名用this代替，而不是构造器名
  - 只能调用一次，且调用必须在最起始处

  ```java
  Flower() {
    this("hi", 47); 
    // 调用其他构造器
    
    System.out.println("default constructor");
  }
  ```

##### 方法重载

- 方法就是给某个动作起名字，为了让方法名字相同而形式参数不同的构造器存在，必须用到方法重载

  - 允许有不同的参数列表，不同的返回值

- 若输入的类型没有对应方法，则会自动提升再寻找

  ```java
  void f(long x) { 
  	System.out.println("long"); 
  } 
  void f(float x) {
  	System.out.println("float"); 
  }
  void main(){
  	f(1) // long
  }
  ```

##### 清除

- 垃圾回收注意事项
  - 对象可能不被回收
  - 垃圾回收只与内存有关
- [ ] 补：垃圾回收器的工作方式



[TOC]

### #4 访问权限

##### 包

- 创建CLASSPATH，存放`.class`文件
- 未给定访问权限：仅包内的该类对象可访问（包访问权限、friendly）
- public：皆可访问
- private：确保访问不了（比如阻止别人直接访问某个特定的构造器）
- protected：提供包访问权限，以及为有继承关系的类提供权限
- 类不可以是private或者protected的



### #5 复用类

##### 组合





